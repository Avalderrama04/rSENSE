<div class="vis-ctrl-sublock">
  <h4 class="vis-ctrl-subtitle">Heat Maps</h4>
  <div>
    <label for="map-by">Map by:</label>
    <select id="map-by" class="form-control">

    </select>
  </div>
 </div>

<!--
        sel = if @configs.heatmapSelection is @HEATMAP_NONE then 'selected' else ''
        controls += "<option value=\"#{@HEATMAP_NONE}\" #{sel}>None</option>"

        sel = if @configs.heatmapSelection is @HEATMAP_MARKERS then 'selected' else ''
        controls += "<option value=\"#{@HEATMAP_MARKERS}\" #{sel}>Marker Density</option>"

        for fieldIndex in data.normalFields
          sel = if @configs.heatmapSelection is fieldIndex then 'selected' else ''
          controls += "<option value=\"#{Number fieldIndex}\" #{sel}>#{data.fields[fieldIndex].fieldName}</option>"

        controls += "</select></div>"

        # Heatmap slider
        controls += "<br>"
        controls += "<div class='inner_control_div'> Heatmap Radius: "
        controls += "<input id='radius-text' value='#{@configs.heatmapRadius}'>m</div>"
        controls += "<div class='inner_control_div'> <div id='heatmap-error-text'> </div></div>"
        controls += "<input id='heatmapSlider' type='range' style='width:95%' data-show-value='true'>"

        # Other
        controls += "<br>"
        controls += "<h4 class='clean_shrink'>Other</h4>"

        # Marker checkbox
        controls += '<div class="inner_control_div">'
        controls += "<input id='markerBox' type='checkbox' name='marker_selector' "
        controls += "#{if @configs.visibleMarkers is 1 then 'checked' else ''}/> Display Markers "
        controls += "</div>"

        # Marker line checkbox
        if @timeLines?
          controls += '<div class="inner_control_div">'
          controls += "<input id='lineBox' type='checkbox' name='line_selector' "
          controls += "#{if @configs.visibleLines is 1 then 'checked' else ''}/> Connect Markers "
          controls += "</div>"

        # Cluster checkbox
        controls += '<div class="inner_control_div">'
        controls += "<input id='clusterBox' type='checkbox' name='cluster_selector' "
        controls += "#{if @configs.visibleClusters is 1 then 'checked' else ''}/> Cluster Markers "
        controls += "</div>"
        controls += "</div></div>"

        # Write HTML
        ($ '#vis-ctrls').append controls

        ($ '#markerBox').click (e) =>
          @configs.visibleMarkers = if e.target.checked then 1 else 0
          @delayedUpdate()

        ($ '#lineBox').click (e) =>
          @configs.visibleLines = if e.target.checked then 1 else 0
          @delayedUpdate()

        ($ '#clusterBox').click (e) =>
          @configs.visibleClusters = if e.target.checked then 1 else 0
          @clusterer.setMaxZoom (if @configs.visibleClusters then 17 else -1)
          @delayedUpdate()

        # Make heatmap select handler
        ($ '#heatmapSelector').change (e) =>
          element = e.target or e.srcElement
          @configs.heatmapSelection = (Number element.value)

          @delayedUpdate()

        # Set up heatmap entry
        ($ '#radius-text').keydown (e) =>
          if e.which == 13
            newRadius = Number ($ '#radius-text').val()
            if isNaN newRadius
              ($ '#radius-text').errorFlash()
              return
            # Guess new pixel radius
            @heatmapPixelRadius = Math.ceil(@heatmapPixelRadius * newRadius /
              @configs.heatmapRadius)
            @configs.heatmapRadius = newRadius
            $('#heatmapSlider')[0].value =
              Math.log(@configs.heatmapRadius) / (Math.log 10)
            @delayedUpdate()

        # Set up heatmap slider
        slider = $('#heatmapSlider')[0]
        slider.min = 0
        slider.max = 6
        slider.value = Math.log(@configs.heatmapRadius) / Math.log(10)
        $('#heatmapSlider').change (e) =>
          newRadius = Math.pow(10, Number(e.target.value))
          # Guess new pixel radius
          @heatmapPixelRadius =
            Math.ceil(@heatmapPixelRadius * newRadius / @configs.heatmapRadius)
          @configs.heatmapRadius = newRadius
          ($ '#radius-text').val("#{@configs.heatmapRadius}")
          @delayedUpdate()
-->
